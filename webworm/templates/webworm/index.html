{% extends "webworm/header.html" %}

{% block content %}
<div class="container" id="master">

  <ul class="nav nav-tabs" id="tabsUL">
    <li class="active"><a data-toggle="tab" href="#searchPane">Search Tools</a></li>
    <li><a data-toggle="tab" href="#resultsPane">Results</a></li>
    <li><a data-toggle="tab" href="#crossfilterPane">Cross Filter</a></li>
 </ul>

  <div class="tab-content">
    <!-- Search Tool Panel -->
    <div class="tab-pane fade in active" id="searchPane">
      {% include "webworm/search-template.html" %}
    </div>

    <!-- Results Panel -->
    <div class="tab-pane fade" id="resultsPane">
      {% if results_list %}
        {% include "webworm/results-template.html" %}
      {% else %}
      <div>
	<!-- Idea for the future, a small random sample here? -->
	<h3>No Search Results</h3>
	<p>Please use the "Search Tools" tab to filter desired experiments for data download.<p>
      </div>
      {% endif %}
    </div>

    <!-- Cross Filter Panel -->
    <div class="tab-pane fade" id="crossfilterPane">
      {% include "webworm/crossfilter-template.html" %}
    </div>
  </div>

</div>

{% load static %}
<script type="text/javascript"> 
  if ({{ results_count }} > 0) {
    $('#tabsUL a[href="#resultsPane"]').trigger('click');
  }
</script>

<script src="{% static "webworm/paginate-discrete.js" %}"></script>
<script src="{% static "webworm/paginate-parameters.js" %}"></script>
<script src="{% static "webworm/paginate-results.js" %}"></script>

<script type="text/javascript"> 
  var wconFilePath = "{% static 'webworm/smaller.wcon'%}";
  var dataFilePath = "{% static 'webworm/worm_mock_data.csv'%}";
</script>

<script src="{% static 'webworm/crossfilter.min.js' %}"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="{% static 'webworm/crossfilter_bar_chart.js' %}"></script>
<script src="{% static 'webworm/crossfilter_parameters.js' %}"></script>
<script src="{% static 'webworm/crossfilter_demonstration.js' %}"></script>

<script type="text/javascript">
  startCrossFilter();
</script>
{% endblock %}
